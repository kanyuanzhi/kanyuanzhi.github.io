---
title: ndnSIM仿真平台使用之安装
tags:	ndnSIM
key: 20190424
---


由于参照ndnSIM官网<http://ndnsim.net/current/index.html>会出现可视化模块安装不上、切换老版本时编译出错等问题，本人在官网安装教程的基础上，重新整理了两个版本的ndnSIM的详细安装流程，版本如下：

1. ndnSIM2.1 <br>
操作系统：Ubuntu 16.04 <br>
ndnSIM：ndnSIM-2.1<br>
ns-3-dev：ns-3.23-dev-ndnSIM-2.1<br>
pybindgen：0.17.0.post45+ng4806e4f<br>

2. ndnSIM2.7<br>
操作系统：Ubuntu 18.10<br>
ndnSIM：ndnSIM-2.7<br>
ns-3-dev：ndnSIM-ns-3.29<br>
pybindgen：0.19.0<br>

<!--more-->

## git的使用
由于在安装不同版本时需要用git来切换，所以首先简单介绍一下安装过程中需要用到的几个git命令。

- git tag

列出现有标签，效果如下：

![image](https://github.com/kanyuanzhi/kanyuanzhi.github.io/raw/master/assets/myimages/20190424/1.jpg)

- git checkout

切换版本，根据git tag列出来的标签，切换至需要的标签。

例如：
```
git checkout ns-3.23-dev-ndnSIM-2.1
```

- git submodule update --init

下载子模块内容，安装ndnSIM时需要用到，需要下载ndn-cxx和NFD两个子模块。

## ndnSIM2.1

对应的操作系统为Ubuntu 16.04

### 安装前准备工作

ndnSIM2.1的安装前准备工作可完全按照官网<http://ndnsim.net/2.1/getting-started.html>所述进行，具体如下：

```
sudo apt-get install build-essential libsqlite3-dev libcrypto++-dev
sudo apt-get install libboost-all-dev
sudo apt-get install python-dev python-pygraphviz python-kiwi
sudo apt-get install python-pygoocanvas python-gnome2
sudo apt-get install python-rsvg ipython
```

### 下载源码
```
mkdir ndnSIM2.1
cd ndnSIM2.1
git clone https://github.com/named-data-ndnSIM/ns-3-dev.git ns-3
git clone https://github.com/named-data-ndnSIM/pybindgen.git pybindgen
git clone https://github.com/named-data-ndnSIM/ndnSIM.git ns-3/src/ndnSIM
```
注意此处第三处clone与官网略有差别，少了一个`--recursive`。

### 切换版本

#### ndnSIM

进入ndnSIM的目录：ndnSIM2.1/ns-3/src/ndnSIM，打开终端，输入`git tag`查看所有标签，发现有ndnSIM-2.1，然后输入一下命令可切换至2.1版本：

```
git checkout ndnSIM-2.1
```

输入以下命令下载子模块ndn-cxx和NFD：

```
git submodule update --init
```


#### ns-3-dev
进入ns-3目录：ndnSIM2.1/ns-3，打开终端，输入`git tag`查看所有标签，发现有ns-3.23-dev-ndnSIM-2.1，然后输入以下命令可切换至3.23版本：

```
git checkout ns-3.23-dev-ndnSIM-2.1
```

#### pybindgen
进入pybindgen目录：ndnSIM2.1/pybindgen，打开终端，输入输入`git tag`查看所有标签，发现有0.17.0.post45+ng4806e4f，然后输入以下命令可切换至该版本：

```
git checkout 0.17.0.post45+ng4806e4f
```

### 重新设置ns-3要求的pybindgen版本

这里应该是pybindgen的一个bug，我们虽然在上步把pybindgen的版本切换到了0.17.0.post45+ng4806e4f，但ns-3在编译前检测时只能检测到0.17.0.post45，但需要0.17.0.post45+ng4806e4f，运行`./waf configure`发现错误如下：

![image](https://github.com/kanyuanzhi/kanyuanzhi.github.io/raw/master/assets/myimages/20190424/3.jpg)

我们进入目录ndnSIM2.1/ns-3/bindings/python，打开wcript文件，作如下修改：

![image](https://github.com/kanyuanzhi/kanyuanzhi.github.io/raw/master/assets/myimages/20190424/4.jpg)

保存后回到ns-3目录，再次运行`./waf configure`，发现错误消失：

![image](https://github.com/kanyuanzhi/kanyuanzhi.github.io/raw/master/assets/myimages/20190424/5.jpg)

### 运行ndnSIM

经过以上配置，ndnSIM2.1可正常运行，可视化程序也可正常运行，可通过一下命令验证。

```
./waf configure --enable-examples
./waf
./waf --run ndn-simple --vis
```





































































